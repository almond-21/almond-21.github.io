<!Doctype: HTML w/ Processing>

<html>

  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>pearljitter</title>
      <script type="text/javascript" src="js/processing.js"></script>
  </head>
  
  <body>
    <h1>pearl jitter</h1>
    <p>also pearljit er</p>

    <script type="text/processing"> 
      int cnt=30;
int time;
Cat[][] purr=new Cat[cnt][cnt];

void setup(){
  size(960,960);
  frameRate(120);
   for(int i=0;i<cnt;i++){
    for(int j=0;j<cnt;j++){
      //float random=random(0,1);
      //if(random>0.6){
      purr[i][j]=new Cat(width/cnt*(i+0.5),width/cnt*(j+0.5),int(random(10,20)));
      //}
      //else{
      //purr[i][j]=new Cat(width/cnt*(i+0.5),width/cnt*(j+0.5),0);
     // }
    }
  }
}

void draw(){
  //background(0);
  fill(0,25);
  rect(0,0,width,height);
  
  noStroke();
  time++;
  time=time%180;
  for(int i=0;i<cnt;i++){
    for(int j=0;j<cnt;j++){
      purr[i][j].look();
      purr[i][j].display();
    }
  }
}

class Cat{
  float x,y;
  float rad;
  float a,b;
  float ang;
  Cat(float xpos,float ypos,float r){
    x=xpos;
    y=ypos;
    rad=r;
  }
  
  void look(){
    if(x<=mouseX){
      ang=atan((y-mouseY)/( mouseX-x));
    }
    else{
      ang=radians(180)+atan((y-mouseY)/( mouseX-x));
    }
    a=x+rad*cos(ang);
    b=y-rad*sin(ang);
    
  }
  void display(){
    ellipseMode(RADIUS);
    //fill(255);
    //ellipse(x,y,rad*1.5,rad*1.5*(sin(radians(time*(rad-8)))));
    
    fill(rad*15-100,355-rad*15,200*ang);
    ellipse(a,b,rad/2,rad/2);
    
    //fill(0);
    //ellipse(a,b,rad*0.8,rad*0.8);
  }
}
  
    </script>
    <canvas id="sketch" style="border: 1px solid black;"></canvas>
    
    
  </body>
  
</html>
