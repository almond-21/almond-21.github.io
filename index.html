<!Doctype: HTML w/ Processing>

<html>

  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>pearljitter</title>
      <script type="text/javascript" src="js/processing.js"></script>
  </head>
  
  <body>
    <h1>pearl jitter</h1>
    <p>also pearljit er</p>

    <script type="text/processing"> 

int[] rn=new int[11];
int[] ln=new int[11];
float[][] xy={{200,200},{50,100},{300,50}};
int[] a={2,2,2};
int[] xx=new int[3];
int x=200;
int v=9;
int vs=0;
int m=0;
int score=0;
int num=60;
boolean boo=false;

void setup(){
  size(400,800);
  frameRate(20);
}

void draw(){
  if(boo==false){
    background(0);
    fill(#3642A2);
    textSize(40);
    text("GELAGA",100,200);
    
    textSize(14);
    text("press left to move left",70,290);
    text("press right to move right",70,320);
    text("press spaceship to shoot",70,350);
    textSize(20);
    text("click to start",100,400);
    noLoop();
    if(mousePressed){
      boo=true;
    loop();
    }
  }
  else if(boo==true){
  background(0);
  noStroke();
  for(int q=1;q<=19;q++){
   for(int p=1;p<=40;p++){
     fill(255);
     ellipse(20*q+random(-1,1),(20*p+vs)%800+random(-1,1),2,2);
   }
  }
  vs=vs+1+round(((v-9)%14)/2);                 //star velocity
  fill(255);
  rectMode(CORNER);
  rect(20,20,width-40,40);
  fill(#FC03E4);
  rect(23,23,score*20,34);
  
  
   for(int i=1;i<=10;i++){
      
    if(rn[i]!=0){
    ln[i]=ln[i]-2*v;
    fill(#3642A2);
    ellipse(rn[i],ln[i],12,20);     //draw bullet
    
    for(int j=0;j<xy.length;j++){
     if(dist(rn[i],ln[i],xy[j][0],xy[j][1])<=25){    //if bullet hits the enemy
      
      a[j]--;
      rn[i]=0;
      ln[i]=700;
      
      if(a[j]==0){                                          //if bullet hits twice
      score++;
      bomb(xy[j][0],xy[j][1]);
      if(score%3==2){
      v+=2;
      }
      xy[j][0]=xy[j][0]+random(-30,30);
      xy[j][1]=-30;
      a[j]=2;
      noLoop();
      }
      loop();
     }
     if(xy[j][1]>=height){                         //if enemy disappears
      xy[j][0]=xy[j][0]+random(-30,30);
      xy[j][1]=-30;
      a[j]=2;
     }
     if(dist(xy[j][0],xy[j][1],x,700)<40){               //if enemy hits the spaceship
       stop();
       background(255);
       textSize(30);
       text("GAME OVER",85,400);
       textSize(20);
       text("your score:",110,430);
       text(score,180,460);
     }
    }
 
    }
   }
   
 
  
  fill(255,0,0);                                        //draw flames
  ellipse(x,730+vs%80,10,10);
  ellipse(x,730+(40+vs)%80,10,10);
   
   
  fill(#FA6000);
  ellipse(x,700,30,50);                                  //draw spaceship
  ellipse(x-40,700,18,30);
  ellipse(x+40,700,18,30);
  rect(x-40,700,80,4);
  
  
  
  for(int j=0;j<xy.length;j++){
  if(a[j]>0){
    fill(80+50*j+40*a[j],80-35*j+50*a[j],230-60*j+60*a[j]);
    ellipse(xy[j][0],xy[j][1],50+random(-2,+2),50+random(-2,+2));    //draw enemy
     
    xy[j][1]+=v/3;
  }
  }
  if(score>=18){
    stop();
    background(255);
    textSize(40);
    text("CLEAR",120,400+random(-2,2));
  }
  }
}

void mousePressed(){
  loop();
  if(mouseX>=x-20 && mouseX<=x+20){
  m=(m%10)+1;
  rn[m]=x;
  ln[m]=700;
  }
  if(mouseX<x-20){
  x=x-2*v;
  }
  if(mouseX>x+20){
  x=x+2*v;
  }
}


void bomb(float x,float y){
  if(num>0){
  fill(255,20,20);
  ellipse(x,y,70,70);
  num--;
  }
  
}
      
    </script>
    <canvas id="sketch" style="border: 1px solid black;"></canvas>

    <script type="text/processing"> 
    int cnt=30;
int time;
Cat[][] purr=new Cat[cnt][cnt];

void setup(){
  size(960,960);
  frameRate(120);
   for(int i=0;i<cnt;i++){
    for(int j=0;j<cnt;j++){
      //float random=random(0,1);
      //if(random>0.6){
      purr[i][j]=new Cat(width/cnt*(i+0.5),width/cnt*(j+0.5),int(random(10,20)));
      //}
      //else{
      //purr[i][j]=new Cat(width/cnt*(i+0.5),width/cnt*(j+0.5),0);
     // }
    }
  }
}

void draw(){
  //background(0);
  fill(0,25);
  rect(0,0,width,height);
  
  noStroke();
  time++;
  time=time%180;
  for(int i=0;i<cnt;i++){
    for(int j=0;j<cnt;j++){
      purr[i][j].look();
      purr[i][j].display();
    }
  }
}

class Cat{
  float x,y;
  float rad;
  float a,b;
  float ang;
  Cat(float xpos,float ypos,float r){
    x=xpos;
    y=ypos;
    rad=r;
  }
  
  void look(){
    if(x<=mouseX){
      ang=atan((y-mouseY)/( mouseX-x));
    }
    else{
      ang=radians(180)+atan((y-mouseY)/( mouseX-x));
    }
    a=x+rad*cos(ang);
    b=y-rad*sin(ang);
    
  }
  void display(){
    ellipseMode(RADIUS);
    //fill(255);
    //ellipse(x,y,rad*1.5,rad*1.5*(sin(radians(time*(rad-8)))));
    
    fill(rad*15-100,355-rad*15,200*ang);
    ellipse(a,b,rad/2,rad/2);
    
    //fill(0);
    //ellipse(a,b,rad*0.8,rad*0.8);
  }
}
    <canvas id="sketch" style="border: 1px solid black;"></canvas>
      
    <script type="text/processing"> 
    
    <canvas id="sketch" style="border: 1px solid black;"></canvas>
    
  </body>
  
</html>
