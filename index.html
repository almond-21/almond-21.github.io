<!Doctype: HTML w/ Processing>

<html>

  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>pearljitter</title>
      <script type="text/javascript" src="js/processing.js"></script>
  </head>
  
  <body>
    <h1>pearl jitter</h1>
    <p>also pearljit er</p>

    <script type="text/processing"> 

        int[] rn=new int[11];
        int[] ln=new int[11];
        float[][] xy={{200,200},{50,100},{300,50}};
        int[] a={2,2,2};
        int[] xx=new int[3];
        int x=200;
        int v=9;
        int vs=0;
        int m=0;
        int score=0;
        int num=60;
        boolean boo=false;
        PFont p;
        
        void setup(){
          size(400,800);
          frameRate(20);
        }
        
        void draw(){
          if(boo==false){
            background(0);
            fill(#3642A2);
            textSize(40);
            text("GELAGA",100,200);
            
            textSize(14);
            text("press left to move left",70,290);
            text("press right to move right",70,320);
            text("press spaceship to shoot",70,350);
            textSize(20);
            text("click to start",100,400);
            noLoop();
            if(mousePressed){
              boo=true;
            loop();
            }
          }
          else if(boo==true){
          background(0);
          noStroke();
          for(int q=1;q<=19;q++){
           for(int p=1;p<=40;p++){
             fill(255);
             ellipse(20*q+random(-1,1),(20*p+vs)%800+random(-1,1),2,2);
           }
          }
          vs=vs+1+round(((v-9)%14)/2);                 //star velocity
          fill(255);
          rectMode(CORNER);
          rect(20,20,width-40,40);
          fill(#FC03E4);
          rect(23,23,score*20,34);
          
          
           for(int i=1;i<=10;i++){
              
            if(rn[i]!=0){
            ln[i]=ln[i]-2*v;
            fill(#3642A2);
            ellipse(rn[i],ln[i],12,20);     //draw bullet
            
            for(int j=0;j<xy.length;j++){
             if(dist(rn[i],ln[i],xy[j][0],xy[j][1])<=25){    //if bullet hits the enemy
              
              a[j]--;
              rn[i]=0;
              ln[i]=700;
              
              if(a[j]==0){                                          //if bullet hits twice
              score++;
              bomb(xy[j][0],xy[j][1]);
              if(score%3==2){
              v+=2;
              }
              xy[j][0]=xy[j][0]+random(-30,30);
              xy[j][1]=-30;
              a[j]=2;
              noLoop();
              }
              loop();
             }
             if(xy[j][1]>=height){                         //if enemy disappears
              xy[j][0]=xy[j][0]+random(-30,30);
              xy[j][1]=-30;
              a[j]=2;
             }
             if(dist(xy[j][0],xy[j][1],x,700)<40){               //if enemy hits the spaceship
               stop();
               background(255);
               textSize(30);
               text("GAME OVER",85,400);
               textSize(20);
               text("your score:",110,430);
               text(score,180,460);
             }
            }
         
            }
           }
      
    </script>
    <canvas id="sketch" style="border: 1px solid black;"></canvas>
    
    
  </body>
  
</html>
