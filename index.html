<!Doctype: HTML w/ Processing>

<html>

  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>pearljitter</title>
      <script type="text/javascript" src="js/processing.js"></script>
  </head>
  
  <body>
    <h1>pearl jitter</h1>
    <p>also pearljit er</p>

     <script type="text/processing"> 
      int cnt=30;
      int time;
      Cat[][] purr=new Cat[cnt][cnt];
      
      void setup(){
        size(960,960);
        frameRate(120);
         for(int i=0;i<cnt;i++){
          for(int j=0;j<cnt;j++){
            //float random=random(0,1);
            //if(random>0.6){
            purr[i][j]=new Cat(width/cnt*(i+0.5),width/cnt*(j+0.5),int(random(10,20)));
            //}
            //else{
            //purr[i][j]=new Cat(width/cnt*(i+0.5),width/cnt*(j+0.5),0);
           // }
          }
        }
      }
      
      void draw(){
        //background(0);
        fill(0,25);
        rect(0,0,width,height);
        
        noStroke();
        time++;
        time=time%180;
        for(int i=0;i<cnt;i++){
          for(int j=0;j<cnt;j++){
            purr[i][j].look();
            purr[i][j].display();
          }
        }
      }
      
      class Cat{
        float x,y;
        float rad;
        float a,b;
        float ang;
        Cat(float xpos,float ypos,float r){
          x=xpos;
          y=ypos;
          rad=r;
        }
        
        void look(){
          if(x<=mouseX){
            ang=atan((y-mouseY)/( mouseX-x));
          }
          else{
            ang=radians(180)+atan((y-mouseY)/( mouseX-x));
          }
          a=x+rad*cos(ang);
          b=y-rad*sin(ang);
          
        }
        void display(){
          ellipseMode(RADIUS);
          //fill(255);
          //ellipse(x,y,rad*1.5,rad*1.5*(sin(radians(time*(rad-8)))));
          
          fill(rad*15-100,355-rad*15,200*ang);
          ellipse(a,b,rad/2,rad/2);
          
          //fill(0);
          //ellipse(a,b,rad*0.8,rad*0.8);
        }
      }
     </script>
     <canvas id="sketch" style="border: 1px solid black;"></canvas>
    
     <script type="text/processing">
       
        int[][] xy=new int[11][2];
        float[][] ab=new float[11][2];
        float[][] pq={{200,300},{900,450},{500,800}};
        float num=1;
        float v=-PI/40;
        float angle=PI/10;
        float s;
        
        void setup(){
          size(1000,1000);
          frameRate(16);
          background(0);
        }
        
        void draw(){
          
          fill(0,160);
          rect(0,0,width,height);
        
          xy[0][0]=pmouseX;
          xy[0][1]=pmouseY;
          
          ab[0][0]=mouseX;
          ab[0][1]=mouseY;
          
          //draw dragon
          for(int i=1;i<=10;i++){
          pushMatrix();
          translate(ab[i-1][0],ab[i-1][1]);
          rotate(0.5*PI-atan2(xy[i][0]-xy[i-1][0],xy[i][1]-xy[i-1][1]));
          if(i>1 && i<7){
            
           if(i==3){
             legs(i-4);
           }
           else if(i==5){
             legs(i-4);
           }
           
          body(30,0);
          }
          
          else if(i==1){
          head(22,0);
          }
          
          else if(i>=7 && i<=10){
          float s=(16-float(i))/10;
          
          pushMatrix();
          scale(s);
          tail(30,0);
          popMatrix();
          }
          popMatrix();
          
          ab[i][0]=ab[i-1][0]-30*cos(0.5*PI+atan2(xy[i][0]-xy[i-1][0],xy[i][1]-xy[i-1][1]));
          ab[i][1]=ab[i-1][1]+30*sin(0.5*PI+atan2(xy[i][0]-xy[i-1][0],xy[i][1]-xy[i-1][1]));
        
        
         
          }
          ////////////////
          
         if(pmouseX!=mouseX){
          
          for(int i=10;i>=1;i--){
          xy[i][0]=xy[i-1][0];
          xy[i][1]=xy[i-1][1]; 
          }
         }
        
         
        }
        
        void mouseMoved(){
          num=num%16+1;
           if(num==16){
             v=-v;
           }
           angle=angle+v;
        }
        
        void head(int x,int y){
          fill(255);
          stroke(#818181);
          beginShape();
          vertex(x-10,y+8);
          vertex(x-15,y+5);
          vertex(x-17,y);
          vertex(x-15,y-5);
          vertex(x-10,y-8);
          vertex(x+15,y-10);
          vertex(x+18,y);
          vertex(x+15,y+10);
          endShape(CLOSE);
          beginShape();
          vertex(x+17,y+12);
          vertex(x+10,y+11);
          vertex(x+8,y+8);
          vertex(x+8,y+4);
          vertex(x+10,y);
          vertex(x+8,y-4);
          vertex(x+8,y-8);
          vertex(x+10,y-11);
          vertex(x+17,y-12);
          vertex(x+20,y);
          endShape(CLOSE);
          
          strokeWeight(2);
          noFill();
          beginShape();
          vertex(x+17,y-12);
          vertex(x+30,y-17);
          vertex(x+40,y-12);
          vertex(x+50,y-17);
          endShape();
          beginShape();
          vertex(x+17,y+12);
          vertex(x+30,y+17);
          vertex(x+40,y+12);
          vertex(x+50,y+17);
          endShape();
        }
        
        void body(int x,int y){
          fill(255);
          strokeWeight(1);
          stroke(#818181);
          beginShape();
          vertex(x-20,y+5);
          vertex(x-15,y+3);
          vertex(x-20,y);
          vertex(x-15,y-3);
          vertex(x-20,y-5);
          vertex(x,y-10);
          vertex(x+20,y-5);
          vertex(x+23,y);
          vertex(x+20,y+5);
          vertex(x,y+10);
          vertex(x-20,y+5);
          endShape(CLOSE);
          
          beginShape();
          vertex(x-20,y);
          vertex(x,y+3);
          vertex(x+20,y);
          vertex(x,y-3);
          endShape(CLOSE);
          beginShape();
          vertex(x,y+3);
          vertex(x+4,y);
          vertex(x,y-3);
          endShape();
        }
        void legs(int z){
             pushMatrix();
             translate(30+20*angle,0);
             rotate(angle/3);
             stroke(#818181);
             strokeWeight(3);
             line(z*20*angle,0,z*15,20);        //lineleg1
             line(z*15,20,z*25,20);     //lineleg2
             line(z*25,20,z*31,24);     //linefeet
             line(z*25,20,z*34,20);
             line(z*25,20,z*31,16);
             
             strokeWeight(1);   //shapeleg1
             beginShape();
             vertex(z*20*angle,0);
             vertex(z*20*angle,5);
             vertex(z*10,20);
             vertex(z*15,20);
             vertex(z*15,15);
             vertex(z*5,0);
             endShape(CLOSE);
             
             popMatrix();
             
             pushMatrix();
             translate(30-20*angle,0);
             rotate(angle/3);
             
             strokeWeight(3);
             stroke(#818181);
             line(20*angle,0,z*15,-20);
             line(z*15,-20,z*25,-20);
             line(z*25,-20,z*31,-24);
             line(z*25,-20,z*34,-20);
             line(z*25,-20,z*31,-16);
             
             strokeWeight(1);
             beginShape();
             vertex(20*angle,0);
             vertex(20*angle,-5);
             vertex(z*10,-20);
             vertex(z*15,-20);
             vertex(z*15,-15);
             vertex(z*5,0);
             endShape(CLOSE);
             
             popMatrix();
        }
        
        void tail(int x,int y){
          fill(255);
          stroke(#818181);
          beginShape();
          vertex(x-20,y+5);
          vertex(x-15,y+3);
          vertex(x-20,y);
          vertex(x-15,y-3);
          vertex(x-20,y-5);
          vertex(x,y-10);
          vertex(x+20,y-5);
          vertex(x+30,y);
          vertex(x+20,y+5);
          vertex(x,y+10);
          vertex(x-20,y+5);
          endShape(CLOSE);
          
          beginShape();
          vertex(x-20,y);
          vertex(x,y+3);
          vertex(x+30,y);
          vertex(x,y-3);
          endShape(CLOSE);
          beginShape();
          vertex(x,y+3);
          vertex(x+6,y);
          vertex(x,y-3);
          endShape();
        }

    </script>
    <canvas id="sketch" style="border: 1px solid black;"></canvas>

    
    <script type="text/processing">
      
      int mode=0;
      int move=0;
      int gap=100;
      int mex=gap;
      int mey=100;
      int step=20;
      int ceilht=5;
      int rad=30;
      int last;
      float resmove=-20;
      float resx=0;
      float resy=100;
      float vres;
      float ranX;
      float ranY;
      float[] vill={20+int(random(-20,20)),60+int(random(-20,20)),100+int(random(-20,20)),140+int(random(-20,20)),180+int(random(-20,20)),220+int(random(-20,20))};
      int[] hit={3,3,4,4,5,5};
      int villnum=6;
      float[] villx=new float[6];
      float[] villy=new float[6];
      
      void setup(){
        size(900,900);
        frameRate(10);
      }
      
      
      void draw(){
       // background(255);
        fill(0,180);
        rect(0,0,width,height);
        chunking();
      
      ///////////////////////////////////////start resid moving after delay////////////////////////// 
      
        resid();
      
      //////////////////////////////////////move and draw me//////////////////////////////////////////  
        if(mousePressed==true){
          move();
        }
          ellipseMode(CENTER);
          fill(255,200,180);
          ellipse(mex,mey,rad,rad);
      
      //////////////////////////////////////meet villain//////////////////////////////////////////       
           for(int i=1;i<villnum+1;i++){
            if(move==vill[i-1]){
            mode=i;
            }
          }
      //////////////////////////////////////get caught//////////////////////////////////////////      
        if(move<=resmove){
          noLoop();
        }
        else if(mey>100+7*step*ceilht){
          noLoop();
        }
          
      }
      
      
      
      void chunking(){
        for(int i=1;i<9;i++){
          stroke(255);
          line(gap,i*step*ceilht+rad/2,width-gap,i*step*ceilht+rad/2);
        }
        for(int j=last;j<villnum;j++){
            ranX=random(-20,20);
            ranY=random(-10,5);
            villx[j]=gap+(vill[j]%((width-2*gap)/step))*step+ranX;
            villy[j]=100+(int(vill[j]/((width-2*gap)/step)))*step*ceilht+ranY;
          fill(max(0,255-hit[j]*130),200,max(0,255-hit[j]*100));
          ellipse(villx[j],villy[j],rad,rad);
        }
      }
      
      void move(){
        if(mode==0){
          move++;
        }
        for(int i=1;i<villnum+1;i++){
          if(mode==i){
            if((mouseX >= villx[i-1]-8) && (mouseX <= villx[i-1]+8) && (mouseY >= villy[i-1]-8) && (mouseY <= villy[i-1]+8)){
              hit[i-1]=hit[i-1]-1;
              print(hit[i-1]);
            }
            if(hit[i-1]<1){
              move++;
             last=mode;
              mode=0;
            }
           }
        }
          mex=gap+(move%((width-2*gap)/step))*step;
          mey=100+(int(move/((width-2*gap)/step)))*step*ceilht;
      }
       
      void resid(){
          vres=0.5;
          resmove=resmove+vres;
          if(resmove>=0){
            resx=gap+(resmove%((width-2*gap)/step))*step;
            resy=100+(int(resmove/((width-2*gap)/step)))*step*ceilht;  
            fill(255,188,3);
            ellipse(resx,resy,rad,rad);
          }
      }
    </script>
    <canvas id="sketch" style="border: 1px solid black;"></canvas>


    <script type="text/processing">
    
        int[] rn=new int[11];
        int[] ln=new int[11];
        float[][] xy={{200,200},{50,100},{300,50}};
        int[] a={2,2,2};
        int[] xx=new int[3];
        int x=200;
        int v=9;
        int vs=0;
        int m=0;
        int score=0;
        int num=60;
        boolean boo=false;
        PFont p;
        
        void setup(){
          size(400,800);
          frameRate(20);
          p=createFont("crewniverse_font.otf",20);
          textFont(p);
        }
        
        void draw(){
          if(boo==false){
            background(0);
            fill(#3642A2);
            textSize(40);
            text("GELAGA",100,200);
            
            textSize(14);
            text("press left to move left",70,290);
            text("press right to move right",70,320);
            text("press spaceship to shoot",70,350);
            textSize(20);
            text("click to start",100,400);
            noLoop();
            if(mousePressed){
              boo=true;
            loop();
            }
          }
          else if(boo==true){
          background(0);
          noStroke();
          for(int q=1;q<=19;q++){
           for(int p=1;p<=40;p++){
             fill(255);
             ellipse(20*q+random(-1,1),(20*p+vs)%800+random(-1,1),2,2);
           }
          }
          vs=vs+1+round(((v-9)%14)/2);                 //star velocity
          fill(255);
          rectMode(CORNER);
          rect(20,20,width-40,40);
          fill(#FC03E4);
          rect(23,23,score*20,34);
          
          
           for(int i=1;i<=10;i++){
              
            if(rn[i]!=0){
            ln[i]=ln[i]-2*v;
            fill(#3642A2);
            ellipse(rn[i],ln[i],12,20);     //draw bullet
            
            for(int j=0;j<xy.length;j++){
             if(dist(rn[i],ln[i],xy[j][0],xy[j][1])<=25){    //if bullet hits the enemy
              
              a[j]--;
              rn[i]=0;
              ln[i]=700;
              
              if(a[j]==0){                                          //if bullet hits twice
              score++;
              bomb(xy[j][0],xy[j][1]);
              if(score%3==2){
              v+=2;
              }
              xy[j][0]=xy[j][0]+random(-30,30);
              xy[j][1]=-30;
              a[j]=2;
              noLoop();
              }
              loop();
             }
             if(xy[j][1]>=height){                         //if enemy disappears
              xy[j][0]=xy[j][0]+random(-30,30);
              xy[j][1]=-30;
              a[j]=2;
             }
             if(dist(xy[j][0],xy[j][1],x,700)<40){               //if enemy hits the spaceship
               stop();
               background(255);
               textSize(30);
               text("GAME OVER",85,400);
               textSize(20);
               text("your score:",110,430);
               text(score,180,460);
             }
            }
         
            }
           }
           
         
          
          fill(255,0,0);                                        //draw flames
          ellipse(x,730+vs%80,10,10);
          ellipse(x,730+(40+vs)%80,10,10);
           
           
          fill(#FA6000);
          ellipse(x,700,30,50);                                  //draw spaceship
          ellipse(x-40,700,18,30);
          ellipse(x+40,700,18,30);
          rect(x-40,700,80,4);
          
          
          
          for(int j=0;j<xy.length;j++){
          if(a[j]>0){
            fill(80+50*j+40*a[j],80-35*j+50*a[j],230-60*j+60*a[j]);
            ellipse(xy[j][0],xy[j][1],50+random(-2,+2),50+random(-2,+2));    //draw enemy
             
            xy[j][1]+=v/3;
          }
          }
          if(score>=18){
            stop();
            background(255);
            textSize(40);
            text("CLEAR",120,400+random(-2,2));
          }
          }
        }
        
        void mousePressed(){
          loop();
          if(mouseX>=x-20 && mouseX<=x+20){
          m=(m%10)+1;
          rn[m]=x;
          ln[m]=700;
          }
          if(mouseX<x-20){
          x=x-2*v;
          }
          if(mouseX>x+20){
          x=x+2*v;
          }
        }
        
        
        void bomb(float x,float y){
          if(num>0){
          fill(255,20,20);
          ellipse(x,y,70,70);
          num--;
          }
          
        }

    </script>
    <canvas id="sketch" style="border: 1px solid black;"></canvas>
    
    
  </body>
  
</html>
